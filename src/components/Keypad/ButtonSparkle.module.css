.sparkle {
  position: absolute;
  left: var(--start-x);
  top: var(--start-y);
  pointer-events: none;
  z-index: 100;
  animation: sparkleBurst 500ms ease-out forwards;
  animation-delay: var(--delay);
  color: var(--color-1);
  filter: drop-shadow(0 0 4px var(--color-2));
}

@keyframes sparkleBurst {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.5) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(
        calc(-50% + cos(var(--angle)) * 20px),
        calc(-50% + sin(var(--angle)) * 20px)
      )
      scale(1.3)
      rotate(90deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(
        calc(-50% + cos(var(--angle)) * 35px),
        calc(-50% + sin(var(--angle)) * 35px)
      )
      scale(1)
      rotate(270deg);
  }
  100% {
    opacity: 0;
    transform: translate(
        calc(-50% + cos(var(--angle)) * 50px),
        calc(-50% + sin(var(--angle)) * 50px)
      )
      scale(0.3)
      rotate(360deg);
  }
}

/* Fallback for browsers that don't support cos/sin in calc */
@supports not (transform: translate(calc(cos(0) * 1px), 0)) {
  .sparkle {
    animation: sparkleBurstFallback 500ms ease-out forwards;
    animation-delay: var(--delay);
  }

  @keyframes sparkleBurstFallback {
    0% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(0.5);
    }
    50% {
      opacity: 1;
      transform: translate(-50%, -80%) scale(1.3);
    }
    100% {
      opacity: 0;
      transform: translate(-50%, -120%) scale(0.3);
    }
  }
}
